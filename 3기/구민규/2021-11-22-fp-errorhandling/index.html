
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This Week I Learned, TWIL">
      
      
      
        <meta name="author" content="구민규">
      
      
        <link rel="canonical" href="https://twil.weekwith.me/3%EA%B8%B0/%EA%B5%AC%EB%AF%BC%EA%B7%9C/2021-11-22-fp-errorhandling/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>함수형 프로그래밍으로 에러 핸들링하기 - TWIL</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/termynal.css">
    
      <link rel="stylesheet" href="../../../css/custom.css">
    
    
      

  


  

  


  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZL5K1KVSWQ"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-ZL5K1KVSWQ",{page_path:t.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZL5K1KVSWQ"></script>


    
    
  <meta property="robots" content="index, follow" />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#41" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="TWIL" class="md-header__button md-logo" aria-label="TWIL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TWIL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              함수형 프로그래밍으로 에러 핸들링하기
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/week-with-me/TWIL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        About TWIL
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../1%EA%B8%B0/%EB%B0%95%EC%A7%80%EC%97%B0/2021-07-11-TypeScript%EC%9D%98-%EA%B8%B0%EC%B4%88/" class="md-tabs__link">
        1기
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../2%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-09-05-%EB%82%B4%EA%B0%80-%ED%84%B0%EB%AF%B8%EB%84%90%EA%B3%BC-%EC%B9%9C%ED%95%B4%EC%A7%80%EB%A0%A4%EB%8A%94-%EC%9D%B4%EC%9C%A0/" class="md-tabs__link">
        2기
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../2021-10-30-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%EB%A5%BC-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EB%A1%9C-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0/" class="md-tabs__link md-tabs__link--active">
        3기
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../4%EA%B8%B0/%EA%B9%80%EB%AF%BC%EC%B2%A0/2021-12-22-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%20%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" class="md-tabs__link">
        4기
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="TWIL" class="md-nav__button md-logo" aria-label="TWIL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    TWIL
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/week-with-me/TWIL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          About TWIL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About TWIL" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          About TWIL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        TWIL 소개
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing-guideline/" class="md-nav__link">
        활동 가이드라인
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../guideline/" class="md-nav__link">
        풀 리퀘스트 및 마크다운 가이드라인
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          1기
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1기" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          1기
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          박지연
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="박지연" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          박지연
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EB%B0%95%EC%A7%80%EC%97%B0/2021-07-11-TypeScript%EC%9D%98-%EA%B8%B0%EC%B4%88/" class="md-nav__link">
        Typescript의 기초
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EB%B0%95%EC%A7%80%EC%97%B0/2021-07-18-javascript-%EB%B3%80%EC%88%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85/" class="md-nav__link">
        javascript 변수, 데이터 타입
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          성승익
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="성승익" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          성승익
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-07-11-Ruby-on-rails%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C/" class="md-nav__link">
        Ruby on rails를 알아봅시다!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-07-18-Rails%EB%A1%9C-%EA%B2%8C%EC%8B%9C%ED%8C%90%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC/" class="md-nav__link">
        Rails로 간단한 게시판을 만들어보자 - 컨트롤러
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-07-25-Rails%EB%A1%9C-%EA%B2%8C%EC%8B%9C%ED%8C%90%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90-%EB%AA%A8%EB%8D%B8-1/" class="md-nav__link">
        Rails로 간단한 게시판을 만들어보자 - 모델 1편
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-08-01-Rails%EB%A1%9C-%EA%B2%8C%EC%8B%9C%ED%8C%90%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90-%EB%AA%A8%EB%8D%B8-2/" class="md-nav__link">
        Rails로 간단한 게시판을 만들어보자 - 모델 2편
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          신태범
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="신태범" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          신태범
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%8B%A0%ED%83%9C%EB%B2%94/2021-07-11-CS-%ED%95%98%EB%A9%B4-%EC%83%9D%EA%B8%B0%EB%8A%94-%EC%9D%BC/" class="md-nav__link">
        [CS] ...하면 생기는 일
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%8B%A0%ED%83%9C%EB%B2%94/2021-07-18-CS-HTTP-1-vs-HTTP2/" class="md-nav__link">
        [CS] HTTP1.1 vs HTTP2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%8B%A0%ED%83%9C%EB%B2%94/2021-07-25-CS-SQL-vs-NOSQL/" class="md-nav__link">
        [CS] SQL vs NOSQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          이동근
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이동근" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          이동근
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EB%8F%99%EA%B7%BC/2021-07-11-CS-%EB%A9%B4%EC%A0%91-%EC%A4%80%EB%B9%84-%EB%B0%8F-%EC%9E%90%EA%B8%B0%EC%86%8C%EA%B0%9C/" class="md-nav__link">
        면접 준비 자기소개 및 개인적인 cs 지식 정리
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EB%8F%99%EA%B7%BC/2021-07-18-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/" class="md-nav__link">
        자바스크립트
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EB%8F%99%EA%B7%BC/2021-07-25-%EB%85%B8%EB%93%9C%EC%99%80-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/" class="md-nav__link">
        노드와 자바스크립트
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EB%8F%99%EA%B7%BC/2021-08-08-node-CRUD-and-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D-%EB%94%A5%EB%9F%AC%EB%8B%9D/" class="md-nav__link">
        [node] C.R.U.D + 간단한 머신러닝 딥러닝
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          이종호
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이종호" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          이종호
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-11-Introduce/" class="md-nav__link">
        TS Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-11-BasicType/" class="md-nav__link">
        TS Basic Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-11-%ED%83%80%EC%9E%85%EC%B6%94%EB%A1%A0-%ED%83%80%EC%9E%85%EB%8B%A8%EC%96%B8/" class="md-nav__link">
        TS 타입 추론과 타입 단언
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-11-redux/" class="md-nav__link">
        Redux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-18-js-oop/" class="md-nav__link">
        JS OOP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-07-18-ts-%EA%B8%B0%EB%B3%B8%ED%83%80%EC%9E%85/" class="md-nav__link">
        TS 기본타입
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-08-08-TS-refact-legacy1/" class="md-nav__link">
        TS Refact Legacy1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%EC%A2%85%ED%98%B8/2021-08-08-TS-refact-legacy2/" class="md-nav__link">
        TS Refact Legacy2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          이태현
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이태현" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          이태현
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-07-04-%EC%98%A4%EB%A6%AC%EC%97%94%ED%85%8C%EC%9D%B4%EC%85%98-%EB%B0%8F-Git-%EC%82%AC%EC%9A%A9%EB%B2%95/" class="md-nav__link">
        오리엔테이션 및 Git 사용법
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-07-11-%EC%A7%84%EB%B2%95%EA%B3%BC-%EC%9E%90%EB%B0%94%EC%9D%98-%EB%B3%80%EC%88%98-%EB%A9%94%EB%AA%A8%EB%A6%AC/" class="md-nav__link">
        진법과 자바의 변수, 메모리
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-07-18-%EC%9E%90%EB%B0%94%EC%9D%98-%EC%97%B0%EC%82%B0%EC%9E%90/" class="md-nav__link">
        자바의 연산자
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" type="checkbox" id="__nav_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7">
          이희진
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이희진" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          이희진
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%9D%B4%ED%9D%AC%EC%A7%84/2021-08-08-%EC%9D%B8%ED%84%B0%EB%84%B7%EA%B3%BC-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C/" class="md-nav__link">
        인터넷과 프로토콜
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" type="checkbox" id="__nav_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_8">
          정선미
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="정선미" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_8">
          <span class="md-nav__icon md-icon"></span>
          정선미
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-07-11-CS-%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%EA%B8%B0%EB%B2%95/" class="md-nav__link">
        [CS] 객체 지향 기법
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-07-18-Redux-Basics/" class="md-nav__link">
        [Redux] Redux Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-07-25-Redux-Basics-2/" class="md-nav__link">
        리액트 app에 리덕스 적용
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-08-01-redux-actions-and-immer/" class="md-nav__link">
        Redux-actions & immer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          2기
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2기" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          2기
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          성승익
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="성승익" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          성승익
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-09-05-%EB%82%B4%EA%B0%80-%ED%84%B0%EB%AF%B8%EB%84%90%EA%B3%BC-%EC%B9%9C%ED%95%B4%EC%A7%80%EB%A0%A4%EB%8A%94-%EC%9D%B4%EC%9C%A0/" class="md-nav__link">
        내가 터미널과 친해지려는 이유
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-09-12-grep%EC%9C%BC%EB%A1%9C-%EC%9B%90%ED%95%98%EB%8A%94-%EB%82%B4%EC%9A%A9%EC%9D%84-%EA%B2%80%EC%83%89%ED%95%B4%EB%B3%B4%EC%9E%90%21/" class="md-nav__link">
        grep으로 원하는 내용을 검색해보자!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-09-21-find%EB%A1%9C-%EC%9B%90%ED%95%98%EB%8A%94-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%B0%BE%EC%95%84%EB%B3%B4%EC%9E%90-1/" class="md-nav__link">
        find로 원하는 파일을 찾아보자! (1)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-10-03-find%EB%A1%9C-%EC%9B%90%ED%95%98%EB%8A%94-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%B0%BE%EC%95%84%EB%B3%B4%EC%9E%90-2/" class="md-nav__link">
        find로 원하는 파일을 찾아보자! (2)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          이태현
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이태현" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          이태현
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-09-05-fastapi-and-sqlmodel-1/" class="md-nav__link">
        [ 공식 문서로 배우는 FastAPI & SQLModel ] 01. FastAPI 소개
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-09-14-fastapi-and-sqlmodel-2/" class="md-nav__link">
        [ 공식 문서로 배우는 FastAPI & SQLModel ] 02. FastAPI 설치와 웹 애플리케이션 서버
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-09-19-fastapi-and-sqlmodel-3/" class="md-nav__link">
        [ 공식 문서로 배우는 FastAPI & SQLModel ] 03. 클라이언트와 서버, URL과 도메인, API와 엔드포인트, 그리고 HTTP 통신
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          정선미
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="정선미" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          정선미
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-09-05-javascript-01/" class="md-nav__link">
        Javascript 01 | 데이터 타입 (종류 / 배경지식)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-09-12-javascript-02/" class="md-nav__link">
        Javascript 02 | 데이터 타입 (변수 선언 / 데이터 할당)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-09-20-redux-middleware-01/" class="md-nav__link">
        Redux-middleware 01 | 개요 (필요한 경우 / 작업 환경 준비)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-10-03-cs-osi-7-layers/" class="md-nav__link">
        CS | OSI 7 layers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          3기
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3기" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          3기
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          구민규
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="구민규" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          구민규
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-10-30-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%EB%A5%BC-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EB%A1%9C-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0/" class="md-nav__link">
        마이크로서비스 아키텍처를 모노레포로 관리하기
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-11-07-react%EC%97%90%EC%84%9C-side-effect-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0/" class="md-nav__link">
        react에서 side effect 관리하기
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-11-17-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%9D%91%EC%A7%91%EB%8F%84/" class="md-nav__link">
        컴포넌트 응집도
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          함수형 프로그래밍으로 에러 핸들링하기
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        함수형 프로그래밍으로 에러 핸들링하기
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 예외의 장단점
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2 예외의 가능한 대안들
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-option" class="md-nav__link">
    4.3 Option 자료 형식
  </a>
  
    <nav class="md-nav" aria-label="4.3 Option 자료 형식">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-option" class="md-nav__link">
    4.3.1 Option의 사용 패턴
  </a>
  
    <nav class="md-nav" aria-label="4.3.1 Option의 사용 패턴">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option" class="md-nav__link">
    Option에 대한 기본적인 함수들
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-api-option" class="md-nav__link">
    4.3.2 예외 지향적 API의 Option 합성과 승급, 감싸기
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44-either" class="md-nav__link">
    4.4 Either 자료 형식
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5 요약
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          성승익
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="성승익" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          성승익
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-10-31-how-to-use-awk/" class="md-nav__link">
        awk로 표 형식의 데이터를 쉽게 가공해보자!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-11-07-RAID/" class="md-nav__link">
        RAID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-11-22-elastic-stack/" class="md-nav__link">
        엘라스틱 서치와 엘라스틱 스택
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          이태현
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이태현" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          이태현
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%9D%B4%ED%83%9C%ED%98%84/2021-10-31-fastapi-and-sqlmodel-4/" class="md-nav__link">
        [ 공식 문서로 배우는 FastAPI & SQLModel ] 04. REST, RESTful API, 그리고 요청 바디를 통한 게시글 작성
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          정선미
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="정선미" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          정선미
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%A0%95%EC%84%A0%EB%AF%B8/2021-10-31-useCallback-useMemo-useEffect/" class="md-nav__link">
        React | useCallback vs useMemo vs useEffect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%A0%95%EC%84%A0%EB%AF%B8/2021-11-07-React-immer%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%B6%88%EB%B3%80%EC%84%B1-%EC%9C%A0%EC%A7%80/" class="md-nav__link">
        React | immer를 통한 불변성 유지
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%EC%A0%95%EC%84%A0%EB%AF%B8/2021-11-14-JS-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%BD%9C%EB%B0%B1%ED%95%A8%EC%88%98-Promise-async-await/" class="md-nav__link">
        JavaScript | 비동기 (콜백 함수, Promise, async/await)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          4기
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="4기" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          4기
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          김민철
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="김민철" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          김민철
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EA%B9%80%EB%AF%BC%EC%B2%A0/2021-12-22-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%20%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" class="md-nav__link">
        트랜잭션 알아보기
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EA%B9%80%EB%AF%BC%EC%B2%A0/2022-01-10-%EC%98%81%EC%86%8D%EC%84%B1%20%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" class="md-nav__link">
        영속성 컨텍스트 알아보기
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EA%B9%80%EB%AF%BC%EC%B2%A0/2022-01-26-%ED%94%8C%EB%9F%AC%EC%8B%9C%28flush%29-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" class="md-nav__link">
        플러시(flush) 알아보기
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          성승익
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="성승익" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          성승익
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-12-19-%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%EC%84%9C%EC%B9%98%EC%9D%98%20%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C%EB%93%A4/" class="md-nav__link">
        ES7 - 엘라스틱서치의 구성요소
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2022-01-09-%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EB%B0%8F%20CRUD/" class="md-nav__link">
        엘라스틱서치의 설치 및 CRUD 실행 방법
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2022-01-16-N%2B1-query-problem/" class="md-nav__link">
        N+1 쿼리 문제
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%84%B1%EC%8A%B9%EC%9D%B5/2022-01-23-N%2B1-query-problem-with-rails/" class="md-nav__link">
        Rails로 알아보는 N+1 쿼리 문제와 해결 방법
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          이지영
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이지영" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          이지영
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%EC%A7%80%EC%98%81/2021-12-19-crontab%EC%9C%BC%EB%A1%9C-%EC%9E%91%EC%97%85-%EC%98%88%EC%95%BD%ED%95%98%EA%B8%B0/" class="md-nav__link">
        Crontab으로 작업 예약하기
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%EC%A7%80%EC%98%81/2022-01-16-Go%EC%9D%98-%ED%8F%AC%EC%9D%B8%ED%84%B0/" class="md-nav__link">
        Go의 포인터
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          이태현
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="이태현" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          이태현
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2021-12-19-python-standard-library-asyncio-for-concurrency/" class="md-nav__link">
        동시성 작업을 위한 파이썬의 비동기 라이브러리 Asyncio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2022-01-09-python-method-resolution-order/" class="md-nav__link">
        파이썬의 MRO(Method Resolution Order)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2022-01-18-virtualization-hypervisior-and-docker/" class="md-nav__link">
        가상화와 하이퍼바이저, 그리고 도커
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%9D%B4%ED%83%9C%ED%98%84/2022-01-25-typescript-oop-object-oriented-programming/" class="md-nav__link">
        TypeScript OOP(Object Oriented Programming)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          정선미
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="정선미" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          정선미
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2021-12-19-TS-%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0/" class="md-nav__link">
        TypeScript | 타입스크립트를 쓰는 이유
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2022-01-08-JS-Closure/" class="md-nav__link">
        JavaScript | 클로저 (Closure)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2022-01-15-TS-%EC%97%B0%EC%82%B0%EC%9E%90%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%83%80%EC%9E%85-%EC%A0%95%EC%9D%98/" class="md-nav__link">
        TypeScript | 연산자를 이용한 타입 정의
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../4%EA%B8%B0/%EC%A0%95%EC%84%A0%EB%AF%B8/2022-01-25-JS-Generator/" class="md-nav__link">
        JavaScript | Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 예외의 장단점
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2 예외의 가능한 대안들
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-option" class="md-nav__link">
    4.3 Option 자료 형식
  </a>
  
    <nav class="md-nav" aria-label="4.3 Option 자료 형식">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-option" class="md-nav__link">
    4.3.1 Option의 사용 패턴
  </a>
  
    <nav class="md-nav" aria-label="4.3.1 Option의 사용 패턴">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option" class="md-nav__link">
    Option에 대한 기본적인 함수들
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-api-option" class="md-nav__link">
    4.3.2 예외 지향적 API의 Option 합성과 승급, 감싸기
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44-either" class="md-nav__link">
    4.4 Either 자료 형식
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5 요약
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>함수형 프로그래밍으로 에러 핸들링하기</h1>
                
                <p>::: note
"스칼라로 배우는 함수형 프로그래밍 - Chapter04 예외를 이용하지 않은 오류 처리"를 읽고 정리했습니다.
:::</p>
<p>제1장에서 예외(exception)를 던지는 것이 하나의 부수 효과임을 간단히 언급했다. 이번 장에서는 오류를 함수적으로 제기하고 처리하는 데 필요한 기본 원리들을 배울 것이다. 여기서 핵심은, 실패 상황과 예외를 보통의 값으로 표현할 수 있으며, 일반적인 오류 처리&amp;복구 패턴을 추상화한 고차 함수를 작성할 수 있다는 것이다. 오류를 값으로 돌려준다는 함수적 해법은 더 안전하고 참조 투명성을 유지한다는 장점이 있다. 게다가 고차 함수 덕분에 예외의 주된 이점인 <strong>오류 처리 논리의 통합</strong>(consolidation of error-handling logic)도 유지된다.</p>
<h2 id="41">4.1 예외의 장단점<a class="headerlink" href="#41" title="Permanent link">&para;</a></h2>
<p>예외가 왜 참조 투명성을 해칠까?</p>
<div class="highlight"><span class="filename">목록 4.1 예외를 던지고 받기</span><pre><span></span><code><span class="k">def</span> <span class="nf">failingFn</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Int</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="n">y</span><span class="p">:</span> <span class="nc">Int</span> <span class="o">=</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Exception</span><span class="p">(</span><span class="s">&quot;fail!&quot;</span><span class="p">)</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">+</span> <span class="mi">5</span>
    <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">{</span> <span class="k">case</span> <span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span> <span class="o">=&gt;</span> <span class="mi">43</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>failingFn을 호출하면 예상대로 오류가 발생한다.</p>
<div class="highlight"><pre><span></span><code>&gt; failingFn<span class="o">(</span><span class="m">12</span><span class="o">)</span>
java.lang.Exception: fail!
  at .failingFn<span class="o">(</span>&lt;console&gt;:8<span class="o">)</span>

  ...
</code></pre></div>
<p>y가 참조에 투명하지 않음을 증명할 수 있다. 만일 x + y의 y를 throw new Exception("fail!")로 치환하면 그전과는 다른 결과가 나온다. 이제는 예외를 잡아서 43을 돌려주는 try 블록 안에서 예외가 발생하기 때문이다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">failingFn2</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Int</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">+</span> <span class="mi">5</span>
    <span class="n">x</span> <span class="o">+</span> <span class="p">((</span><span class="k">throw</span> <span class="k">new</span> <span class="nc">Exception</span><span class="p">(</span><span class="s">&quot;fail!&quot;</span><span class="p">)):</span> <span class="nc">Int</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">{</span> <span class="k">case</span> <span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span> <span class="o">=&gt;</span> <span class="mi">43</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&gt; failingFn<span class="o">(</span><span class="m">12</span><span class="o">)</span>
res1: <span class="nv">Int</span> <span class="o">=</span> <span class="m">43</span>
</code></pre></div>
<p>참조 투명성에서 참조에 투명한 표현식의 의미는 <strong>문맥(context)에 의존하지 않는다</strong>라는 것을 의미하고, 지역적으로 추론할 수 있지만 참조에 투명하지 않은 표현식의 의미는 <strong>문맥에 의존적이고(context-dependent)</strong> 좀 더 전역의 추론이 필요하다는 것으로 이해해도 될 것이다.
예를 들어 참조 투명 표현식 42 + 5의 의미는 그 표현식을 포함한 더 큰 표현식에 의존하지 않는다. 그 표현식은 항상, 그리고 영원히 47과 같다. 그러나 <code>throw new Exception("fail")</code>이라는 표현식의 의미는 문맥에 크게 의존한다. 방금 보았듯이, 이 표현식은 try 블록에 포함되어 있는지, 있다면 어떤 try 블록인지에 따라 달라진다.</p>
<p>예외의 주된 문제 두 가지는 다음과 같다.</p>
<ul>
<li>
<p>방금 논의했듯이, <strong>예외는 참조 투명성을 위반하고 문맥 의존성을 도입한다.</strong> 따라서 치환 모형의 간단한 추론이 불가능해지고 예외에 기초한 혼란스러운 코드가 만들어진다.</p>
</li>
<li>
<p><strong>예외는 형식에 안전하지 않다.</strong> failingFn의 형식인 Int =&gt; Int만 보고는 이 함수가 예외를 던질 수 있다는 사실을 전혀 알 수 없으며, 그래서 컴파일러는 failingFn의 호출자에게 그 예외들을 처리하는 방식을 결정하라고 강제할 수 없다.</p>
</li>
</ul>
<p>이런 단점들이 없으면서도 예외의 기본 장점인 <strong>오류 처리의 통합과 중앙집중화</strong>를 유지하는(오류 처리 논리를 코드 기반의 여기저기에 널어 놓지 않아도 되도록) 대안이 있으면 좋을 것이다. 지금부터 소개하는 대안 기법은 "예외를 던지는 대신, 예외적인 조건이 발생했음을 뜻하는 값을 돌려준다"라는 오래된 착안에 기초한다. 이 기법에서는 오류 부호를 직접 돌려주는 대신 그런 '미리 정의해 둘 수 있는 값들'을 대표하는 새로운 일반적 형식을 도입하고, 오류의 처리와 전파에 관한 공통적인 패턴들을 고차 함수들을 이용해서 캡슐화한다. 이 전략은 <strong>형식에 완전히 안전하며</strong>, 실수를 미리 발견할 수 있다.</p>
<h2 id="42">4.2 예외의 가능한 대안들<a class="headerlink" href="#42" title="Permanent link">&para;</a></h2>
<p>다음은 목록의 평균(mean)을 계산하는 함수이다. 빈 목록에 대해서는 평균의 정의되지 않는다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">Seq</span><span class="p">[</span><span class="nc">Double</span><span class="p">]):</span> <span class="nc">Double</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">ArithmeticException</span><span class="p">(</span><span class="s">&quot;mean of empty list!&quot;</span><span class="p">)</span>
  <span class="k">else</span> <span class="n">xs</span><span class="p">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="p">.</span><span class="n">length</span>
</code></pre></div>
<p>mean 함수는 소위 <strong>부분 함수(partical function)</strong>의 예이다. 부분 함수란 일부 입력에 대해서는 정의되지 않는 함수를 말한다.</p>
<p>자신이 받아들이는 입력에 대해 입력 형식만으로는 결정되지 않는 어떤 가정을 두는 함수는 대부분 부분 함수이다. 받아들일 수 없는 입력에 대해 예외를 던질 수도 있지만, 꼭 그래야 하는 것은 아니다. 대안 몇 가지를 살펴보자.</p>
<p>첫 번째 대안은 Double 형식의 가짜 값을 돌려주는 것이다. 모든 경우에 그냥 <code>xs.sum / xs.length</code>를 돌려준다면 빈 목록에 대해서는 <code>0.0 / 0.0</code>을 돌려주게 되는데, 이는 Double.Nan이다. 아니면 다른 어떤 경계 값(sentinel value)이나 null을 돌려줄 수도 있다. 이런 부류의 접근방식은 예외 기능이 없는 언어에서 오류를 처리하는데 흔히 쓰인다. 그러나 이 책에서는 이런 접근방식을 거부한다. 이유는 여러 가지이다.</p>
<ul>
<li>오류가 소리없이 전파될 수 있다. 호출자가 이런 오류 점검을 실수로 빼먹어도 컴파일러가 경고해주지 않는다.</li>
<li>실수의 여지가 많다는 점 외에, 호출하는 쪽에 호출자가 '진짜' 결과를 받았는지 점검하는 명식적 if 문들이 늘어난다.</li>
<li>다형적 코드에는 적용할 수 없다. 출력 형식에 따라서는 그 형식의 경계 값을 결정하는 것이 <strong>불가능</strong>할 수도 있다.</li>
<li>호출자에게 특별한 방침이나 호출 규약을 요구한다. mean 함수를 제대로 사용하려면 호출자가 그냥 mean을 호출해서 그 결과를 사용하는 것 이상의 작업을 수행해야한다. 이렇게 되면 모든 인수를 균일한 방식으로 처리해야 하는 고차 함수에 전달하기 어려워진다.</li>
</ul>
<p>또 다른 대안은 함수가 입력을 처리할 수 없는 상황에 처했을 때 무엇을 해야 하는지 말해주는 인수를 호출자가 지정하는 것이다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mean_1</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">IndexedSeq</span><span class="p">[</span><span class="nc">Double</span><span class="p">],</span> <span class="n">onEmpty</span><span class="p">:</span> <span class="nc">Double</span><span class="p">):</span> <span class="nc">Double</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span> <span class="n">onEmpty</span>
  <span class="k">else</span> <span class="n">xs</span><span class="p">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="p">.</span><span class="n">length</span>
</code></pre></div>
<p>이렇게 하면 mean은 부분함수가 아닌 완전 함수(total function)가 된다. 그러나 여기에는 결과가 정의되지 않는 경우의 처리 방식을 함수의 <strong>직접적인</strong> 호출자가 알고 있어야 하고 그런 경우에도 항상 하나의 Double 값을 결과로 돌려주어야 한다는 단점이 있다.</p>
<h2 id="43-option">4.3 Option 자료 형식<a class="headerlink" href="#43-option" title="Permanent link">&para;</a></h2>
<p>해법은, 함수가 항상 답을 내지는 못한다는 점을 반환 형식을 통해서 명시적으로 표현하는 것이다. 이를, 오류 처리 전략을 호출자에게 미루는 것으로 생각해도 된다. 이를 위해 Option이라는 새로운 형식을 도입한다. 이 형식은 스칼라 표준 라이브러리에도 존재하나, 학습을 위해 직접 만들어 본다.</p>
<div class="highlight"><pre><span></span><code><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Option</span><span class="p">[</span><span class="o">+</span><span class="nc">A</span><span class="p">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Some</span><span class="p">[</span><span class="o">+</span><span class="nc">A</span><span class="p">](</span><span class="n">get</span><span class="p">:</span> <span class="nc">A</span><span class="p">)</span> <span class="k">extends</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">None</span> <span class="k">extends</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Nothing</span><span class="p">]</span>
</code></pre></div>
<p>Option에는 두 개의 경우 문이 있다. Option을 정의할 수 있는 경우에는 Some이 되고, 정의할 수 없는 경우에는 None이 된다.</p>
<p>이제 Option을 이용해서 mean을 구현하면 다음과 같은 코드가 된다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">Seq</span><span class="p">[</span><span class="nc">Double</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Double</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span> <span class="nc">None</span>
  <span class="k">else</span> <span class="nc">Some</span><span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
</code></pre></div>
<p>이제는 이 함수의 결과가 항상 정의되지는 않는다는 사실이 함수의 반환 형식에 반영되어 있다. 함수가 항상 선언된 반환 형식(Optionp[Double])의 결과를 돌려주어야 한다는 점은 여전하므로, mean은 이제 하나의 <strong>완전 함수</strong>이다. 이 함수는 입력 형식의 모든 값에 대해 정확히 하나의 출력 형식 값을 돌려준다.</p>
<p><img
src={require("./images/option.jpeg").default}
alt="option"
/></p>
<h3 id="431-option">4.3.1 Option의 사용 패턴<a class="headerlink" href="#431-option" title="Permanent link">&para;</a></h3>
<p>부분 함수는 프로그래밍에서 흔히 볼 수 있으며, FP에서는 그런 부분성을 흔히 Option 같은 자료 형식으로 처리한다. Option이 편리한 이유는, 오류 처리의 공통 패턴을 고차 함수들을 이용해서 추출함으로써 예외 처리 코드에 흔히 수반되는 판에 박힌 코드를 작성하지 않아도 된다는 점이다.</p>
<h4 id="option">Option에 대한 기본적인 함수들<a class="headerlink" href="#option" title="Permanent link">&para;</a></h4>
<p>Option은 최대 하나의 원소를 담을 수 있다는 점을 제외하면 List와 비슷하다. 실제로 Option에는 이전에 본 여러 List 함수에 대응되는 함수들이 있다. 이번 절에서는 함수들을 가능하면 Option 특질(trait)의 본문에 집어넣는다. 그러면 <code>fn(obj, arg1)</code> 대신 <code>obj.fn(arg1)</code> 이나 <code>obj fn arg1</code>로 호출할 수 있다.</p>
<div class="highlight"><span class="filename">목록 4.2 Option 자료 형식</span><pre><span></span><code><span class="k">trait</span> <span class="nc">Option</span><span class="p">[</span><span class="o">+</span><span class="nc">A</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">def</span> <span class="nf">map</span><span class="p">[</span><span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">faltMap</span><span class="p">[</span><span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">getOrElse</span><span class="p">[</span><span class="nc">B</span> <span class="o">&gt;:</span> <span class="nc">A</span><span class="p">](</span><span class="n">default</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">B</span>
  <span class="k">def</span> <span class="nf">orElse</span><span class="p">[</span><span class="nc">B</span> <span class="o">&gt;:</span> <span class="nc">A</span><span class="p">](</span><span class="n">ob</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">map: 만일 Option이 None이 아니면 f를 적용한다.</span><pre><span></span><code><span class="k">def</span> <span class="nf">map</span><span class="p">[</span><span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span> <span class="o">=</span> <span class="bp">this</span> <span class="k">match</span>
  <span class="k">case</span> <span class="nc">None</span> <span class="o">=&gt;</span> <span class="nc">None</span>
  <span class="k">case</span> <span class="nc">Some</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Some</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="nc">A</span><span class="p">))</span>
</code></pre></div>
<p>map 함수는 Option 안의 결과(가 있다면)를 반환하는데 사용할 수 있다. 이를 요류가 발생하지 않았다는 가정하에 계산하는 것으로 생각해도될 것이다. 또한, 이는 오류 처리를 나중의 코드에 미루는 수단이기도 하다.</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="n">department</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">lookupByName</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Employee</span><span class="p">]</span> <span class="o">=</span> <span class="p">...</span>

<span class="kd">val</span> <span class="n">joeDepartment</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">String</span><span class="p">]</span> <span class="o">=</span>
  <span class="n">lookupByName</span><span class="p">(</span><span class="s">&quot;Joe&quot;</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="n">_</span><span class="p">.</span><span class="n">department</span><span class="p">)</span>
</code></pre></div>
<p>이 예에서 <code>lookUpByName("Joe")</code>는 <code>Option[Employee]</code>를 돌려준다. 그것을 map으로 변환하면 Joe가 속한 부서의 이름을 뜻하는 <code>Option[String]</code>이 나온다. 여기서 <code>loopupByName("Joe")</code>의 결과를 명시적으로 점검하지 않음을 주목하기 바란다. 그냥 오류가 전혀 발생하지 않았다는 듯이 map의 인수 안에서 계산을 계속 진행한다. 만일 <code>loopupByName("Joe")</code>가 None을 돌려주었다면 계산의 나머지 부분이 취소되어서 map은 <code>_.department</code> 함수를 전혀 호출하지 않는다.</p>
<div class="highlight"><span class="filename">faltMap: 만일 Option이 None이 아니면 f(실패할 수 있음)를 적용한다.</span><pre><span></span><code><span class="k">def</span> <span class="nf">faltMap</span><span class="p">[</span><span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span> <span class="o">=</span>
  <span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">).</span><span class="n">getOrElse</span><span class="p">(</span><span class="nc">None</span><span class="p">)</span>
</code></pre></div>
<p>flatMap을 이용하면 여러 단계로 이루어진 계산을 수행하되 어떤 단계라도 실패하면 그 즉시 나머지 모든 과정이 취소되는 방식으로 수행할 수 있다. 이는 None.flatMap(f)가 f를 실행하지 않고 즉시 None을 돌려주기 때문이다.</p>
<div class="highlight"><span class="filename">getOrElse</span><pre><span></span><code><span class="k">def</span> <span class="nf">getOrElse</span><span class="p">[</span><span class="nc">B</span> <span class="o">&gt;:</span> <span class="nc">A</span><span class="p">](</span><span class="n">default</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">B</span> <span class="o">=</span> <span class="bp">this</span> <span class="k">match</span>
  <span class="k">case</span> <span class="nc">None</span> <span class="o">=&gt;</span> <span class="n">default</span>
  <span class="k">case</span> <span class="nc">Some</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">a</span>
</code></pre></div>
<p>None일 시 default를 반환한다.</p>
<div class="highlight"><span class="filename">orElse</span><pre><span></span><code><span class="k">def</span> <span class="nf">orElse</span><span class="p">[</span><span class="nc">B</span> <span class="o">&gt;:</span> <span class="nc">A</span><span class="p">](</span><span class="n">ob</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span> <span class="o">=</span>
  <span class="n">map</span><span class="p">(</span><span class="nc">Some</span><span class="p">(</span><span class="n">_</span><span class="p">)).</span><span class="n">getOrElse</span><span class="p">(</span><span class="n">ob</span><span class="p">)</span>
</code></pre></div>
<p>orElse는 getOrElse와 비슷하되 첫 Option이 정의되지 않으면 다른 Option을 돌려준다는 점이 다르다. 이는 실패할 수 있는 계산이 성공하지 않으면 둘째 것을 시도하고자 할 때 유용하다.</p>
<div class="highlight"><span class="filename">filter: 값이 f를 만족하지 않으면 Some을 None으로 변화한다.</span><pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span>
  <span class="k">case</span> <span class="nc">Some</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="bp">this</span>
  <span class="k">case</span> <span class="n">_</span> <span class="o">=&gt;</span> <span class="nc">None</span>
</code></pre></div>
<p>filter는 성공적인 값이 주어진 술어와 부합하지 않을 때 성공을 실패로 변환하는데 사용할 수 있다.</p>
<p>흔한 사용 패턴은 map, faltMap, filter의 임의의 조합을 이용해서 Option을 변환하고 제일 끝에서 getOrElse를 이용해서 오류 처리를 수행하는 것이다.</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span> <span class="n">dept</span><span class="p">:</span> <span class="nc">String</span> <span class="o">=</span>
  <span class="n">loolupByName</span><span class="p">(</span><span class="s">&quot;Joe&quot;</span><span class="p">).</span>
  <span class="n">map</span><span class="p">(</span><span class="n">_</span><span class="p">.</span><span class="n">dept</span><span class="p">).</span>
  <span class="n">filter</span><span class="p">(</span><span class="n">_</span> <span class="o">!=</span> <span class="s">&quot;Accounting&quot;</span><span class="p">).</span>
  <span class="n">getOrElse</span><span class="p">(</span><span class="s">&quot;Default Dept&quot;</span><span class="p">)</span>
</code></pre></div>
<p>흔한 관용구로, <code>o.getOrElse(throw new Exception("FAIL"))</code>은 Option의 None 경우를 예외로 처리되게 만든다. 합리적인 프로그램이라면 결코 예외를 잡을 수 없는 상황에서만 예외를 사용하면 된다. 어떤 호출자가 복구 가능한 오류로 처리할 수 있을 만한 상황이라면 예외 대신 Option을 돌려주어 호출자에게 유연성을 부여한다.</p>
<p>이상에서 보듯이 오류를 보통의 값으로서 돌려주면 코드를 짜기가 편해지며, 고차 함수를 사용함으로써 예외의 주된 장점인 오류 처리의 통합과 격리도 유지할 수 있다. 계산의 매 단계마다 None을 점검할 필요가 없음을 주목하기 바란다. 그냥 일련의 변환을 수행하고 나중에 원하는 장소에서 None을 점검하고 처리하면 된다. 또한 추가적인 안전성도 얻게 된다. <code>Option[A]</code>는 A와는 다른 형식이므로, None일 수 있는 상황의 처리를 명시적으로 지연 또는 수행하지 않으면 컴파일러가 오류를 낸다.</p>
<h3 id="432-api-option">4.3.2 예외 지향적 API의 Option 합성과 승급, 감싸기<a class="headerlink" href="#432-api-option" title="Permanent link">&para;</a></h3>
<p>일단 Option을 사용하기 시작하면 코드 기반 전체에 Option이 번지게 되리라는 성급한 결론을 내리는 독자도 있을 것이다. 즉 Option을 받거나 돌려주는 메서드를 호출하는 모든 코드를 Some이나 None을 처리하도록 수정해야 한다고 추측할 수 있다. 그러나 실제로는 그런 부담을 질 필요가 없다. 보통의 함수를 Option에 대해 작용하는 함수로 <strong>승급시킬(lift)</strong> 수 있기 때문이다.</p>
<p>예를 들어 map 함수가 있으면 <code>Option[A]</code> 형식의 값들을 <code>A =&gt; B</code> 형식의 함수를 이용해서 변환한 후 하나의 <code>Option[B]</code>를 결과로 돌려주게 하는 것이 가능하다. 이를 map이 <code>A =&gt; B</code> 형식의 함수 f를 <code>Option[A] =&gt; Option[B]</code> 형식의 함수로 변환한다고 이해해도 좋을 것이다. 구체적인 방법은 다음과 같다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">lift</span><span class="p">[</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span> <span class="n">map</span> <span class="n">f</span>
</code></pre></div>
<p>이러한 lift가 있으면 지금까지 나온 그 어떤 함수라도 한 Option 값의 <strong>문맥 안에서</strong> 작용하도록 변환할 수 있다. 예를 하나 보다.</p>
<p>자동차 보험 회사의 웹 사이트에서 사용자가 즉석 온라인 견적을 요구하는 양식을 제출하는 페이지를 위한 논리를 구현한다고 하자. 양식에 담긴 정보를 분석한 후, 결과적으로는 다음과 같은 보험료율 함수를 호출하게 될 것이다.</p>
<div class="highlight"><span class="filename">두 가지 핵심 요인으로 연간 자동차 보험료를 계산하는 공식</span><pre><span></span><code><span class="k">def</span> <span class="nf">insuranceRateQuote</span><span class="p">(</span><span class="n">age</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">numberOfSpeedingTickets</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Double</span>
</code></pre></div>
<p>이 함수를 호출하려면 고객의 나이와 고객이 받은 속도위반 딱지의 수를 알아야 한다. 그런데 고객이 제출한 웹 페이지의 양식에서 문자열 파싱이 실패할 수 있다. 주어진 문자열 s를 <code>s.toInt</code>를 이용해서 Int로 파싱해 보았을 때 만일 문자열이 유효한 정수를 나타내지 않는다면 <code>s.toInt</code>는 NumberFormatException이라는 예외를 던진다.</p>
<div class="highlight"><pre><span></span><code>&gt; <span class="s2">&quot;112&quot;</span>.toInt
res0: <span class="nv">Int</span> <span class="o">=</span> <span class="m">112</span>

&gt; <span class="s2">&quot;hello&quot;</span>.toInt
java.lang.NumberFormatException: For input string: <span class="s2">&quot;hello&quot;</span>
  ...
</code></pre></div>
<p>그럼 toInt의 예외 기반 API를 Option으로 변환하고 <code>parseInsuranceRateQuote</code> 함수를 구현해 보자. 이 함수는 나이와 속도위반 딱지 수를 받고, 두 값의 정수 파싱이 성공하면 <code>insuranceRateQuote</code>를 호출한다.</p>
<div class="highlight"><span class="filename">목록 4.3 Option의 용례</span><pre><span></span><code><span class="k">def</span> <span class="nf">parseInsuranceRateQuote</span><span class="p">(</span>
    <span class="n">age</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">numberOfSpeedingTickets</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Double</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="n">optAge</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Try</span><span class="p">(</span><span class="n">age</span><span class="p">.</span><span class="n">toInt</span><span class="p">)</span>
  <span class="kd">val</span> <span class="n">optTickets</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Try</span><span class="p">(</span><span class="n">numberOfSpeedingTickets</span><span class="p">.</span><span class="n">toInt</span><span class="p">)</span>
  <span class="n">insuranceRateQuote</span><span class="p">(</span><span class="n">optAge</span><span class="p">,</span> <span class="n">optTickets</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// A 인수를 엄격하지 않는 방식으로 받아들인다. a를 평가하는 도중에 예외가 발생하면 그것을 None으로 변환할 수 있게 하기 위해서이다.</span>
<span class="k">def</span> <span class="nf">Try</span><span class="p">[</span><span class="nc">A</span><span class="p">](</span><span class="n">a</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">A</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">try</span> <span class="nc">Some</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
  <span class="k">catch</span> <span class="p">{</span> <span class="k">case</span> <span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span> <span class="o">=&gt;</span> <span class="nc">None</span> <span class="p">}</span>
</code></pre></div>
<p>Try 함수는 예외 기반 API를 Option 지향적 API로 변환하는데 사용할 수 있는 범용 함수이다. 이 함수는 엄격하지 않은 또 다른 '게으른(lazy)' 인수를 사용한다. a의 형식 주해 =&gt; A가 바로 그 점을 나타낸다.</p>
<p>그런데 문제점이 하나 있다. optAge와 optTickets을 파싱해서 <code>Option[Int]</code>를 얻은 후 <code>insuranceRateQuote</code> 함수를 호출해야 하는데, 그 함수는 두 개의 Int 값을 받는다는 점이다. <code>Option[Int]</code> 값들을 받도록 <code>insuranceRateQuote</code>를 다시 작성해야할까? 그렇지 않다. <code>insuranceRateQuote</code>를 변경하면 관심사들이 얽혀서 한 계산이 항상 이전 계산의 성공 여부를 신경 써야 하는 사태가 벌어진다.
<code>insuranceRateQuote</code>를 수정하는 대신, 그것을 두 생략적(optional) 값들의 문맥에서 작동하도록 승급시키는 것이 바람직하다.</p>
<div class="highlight"><span class="filename">연습문제 4.3</span><pre><span></span><code><span class="c1">// 두 Option 값을 이항 함수(binary function)를 이용해서 결합하는 일반적 함수 map2를 작성하라.</span>
<span class="c1">// 두 Option 값 중 하나라도 None이면 map2의 결과 역시 None이어야 한다. 서명은 다음과 같다.</span>

<span class="k">def</span> <span class="nf">map2</span><span class="p">[</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">,</span> <span class="nc">C</span><span class="p">](</span><span class="n">a</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">],</span> <span class="n">b</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">])(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">C</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">C</span><span class="p">]</span> <span class="o">=</span>
  <span class="n">a</span><span class="p">.</span><span class="n">flatMap</span><span class="p">(</span><span class="n">aa</span> <span class="o">=&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">bb</span> <span class="o">=&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">aa</span><span class="p">,</span> <span class="n">bb</span><span class="p">)))</span>
</code></pre></div>
<p>다음은 이러한 map2로 <code>parseInsuranceRateQuote</code>를 구현한 예이다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parseInsuranceRateQuote</span><span class="p">(</span>
    <span class="n">age</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">numberOfSpeedingTickets</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Double</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="n">optAge</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Try</span> <span class="p">{</span> <span class="n">age</span><span class="p">.</span><span class="n">toInt</span> <span class="p">}</span> <span class="c1">// 인수 하나를 받는 함수는 중괄호 대신 대괄호로 호출할 수 있다. Try(age.onInt)와 같다.</span>
  <span class="kd">val</span> <span class="n">optTicket</span><span class="p">:</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Try</span> <span class="p">{</span> <span class="n">numberOfSpeedingTickets</span><span class="p">.</span><span class="n">toInt</span> <span class="p">}</span>
  <span class="n">map2</span><span class="p">(</span><span class="n">optAge</span><span class="p">,</span> <span class="n">optTickets</span><span class="p">)(</span><span class="n">insuranceRateQuote</span><span class="p">)</span> <span class="c1">// 둘 중 하나라도 파싱에 실패하면 즉시 None을 돌려준다.</span>
<span class="p">}</span>
</code></pre></div>
<p>map2 함수는 인수가 두 개인 그 어떤 함수라도 아무 수정없이 "Option에 대응하기" 만들 수 있음을 의미한다. 예전에 만들어 둔 함수라도 Option의 문맥에서 작동하도록 승급시킬 수 있다.</p>
<div class="highlight"><span class="filename">연습문제 4.4</span><pre><span></span><code><span class="c1">// Option들의 목록을 받고 그 목록에 있는 모든 Some 값으로 구성된 목록을 담은 Option을 돌려주는 함수 sequence를 작성하라. 원래의 목록에 None이 하나라도 있으면 함수의 결과도 None이어야 한다. 그렇지 않으면 원래의 목록에 있는 모든 값의 목록을 담은 Some을 돌려주어야 한다.</span>

<span class="k">def</span> <span class="nf">sequence</span><span class="p">[</span><span class="nc">A</span><span class="p">](</span><span class="n">a</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">Option</span><span class="p">[</span><span class="nc">A</span><span class="p">]]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">List</span><span class="p">[</span><span class="nc">A</span><span class="p">]]</span> <span class="o">=</span>
  <span class="n">as</span> <span class="k">match</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Some</span><span class="p">(</span><span class="nc">Nil</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">h</span> <span class="o">::</span> <span class="n">t</span> <span class="o">=&gt;</span> <span class="n">h</span><span class="p">.</span><span class="n">flatMap</span><span class="p">(</span><span class="n">hh</span> <span class="o">=&gt;</span> <span class="n">sequence</span><span class="p">(</span><span class="n">t</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="n">hh</span> <span class="o">::</span> <span class="n">_</span><span class="p">))</span>
</code></pre></div>
<p>실패할 수 있는 함수를 목록에 사상했을 때 만일 목록의 원소 중 하나라도 None을 돌려주면 전체 결과가 None이 되게 해야 할 때도 있다. 목록에 담긴 String 값들 전부가 Option[Int]로의 파싱에 성공해야 한다면 map의 결과들을 sequence로 순차 결합하면 된다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parseInts</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">List</span><span class="p">[</span><span class="nc">Int</span><span class="p">]]</span> <span class="o">=</span>
  <span class="n">sequence</span><span class="p">(</span><span class="n">a</span> <span class="n">map</span> <span class="p">(</span><span class="n">i</span> <span class="o">=&gt;</span> <span class="nc">Try</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">toInt</span><span class="p">)))</span>
</code></pre></div>
<p>그러나 안타깝게도 이 접근방식은 목록을 두 번 훑어야 하기 때문에 비효율적이다. 한 번은 String을 <code>Option[Int]</code>로 변환하기 위해, 또 한 번은 그 <code>Option[Int]</code> 값들을 하나의 <code>Option[List[Int]]</code>로 결합하기 위해서이다. 이러한 map의 결과들의 순차 결합은 충분히 흔한 작업이기 때문에 다음과 같은 일반적 함수 traverse를 만들어 둘 필요가 있다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">traverse</span><span class="p">[</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">](</span><span class="n">a</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">A</span><span class="p">])(</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">B</span><span class="p">]):</span> <span class="nc">Option</span><span class="p">[</span><span class="nc">List</span><span class="p">[</span><span class="nc">B</span><span class="p">]]</span> <span class="o">=</span>
   <span class="n">as</span> <span class="k">match</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Some</span><span class="p">(</span><span class="nc">Nil</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">h::t</span> <span class="o">=&gt;</span> <span class="n">map2</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">h</span><span class="p">),</span> <span class="n">traverse</span><span class="p">(</span><span class="n">t</span><span class="p">)(</span><span class="n">f</span><span class="p">))(</span><span class="n">_</span> <span class="o">::</span> <span class="n">_</span><span class="p">)</span>
</code></pre></div>
<p>map, lift, sequence, traverse, map2 같은 함수들이 있으면, 생략적 값을 다루기 위해 기존 함수를 수정해야 할 일이 <strong>전혀</strong> 없어야 하는 것이 정상이다.</p>
<h2 id="44-either">4.4 Either 자료 형식<a class="headerlink" href="#44-either" title="Permanent link">&para;</a></h2>
<p>이번 장의 핵심은 실패와 예외를 보통의 값으로 표현할 수 있다는 점과 오류 처리 및 복구에 대한 공통의 패턴을 추상화하는 함수를 작성할 수 있다는 점이다. Option의 경우 예외적인 조건이 발생했을 때 무엇이 잘못되었는지에 대한 정보를 제공하지 못한다는 단점을 아마 눈치챘을 것이다. 실패 시 이 형식은 그냥 유효한 값이 없음을 뜻하는 None을 돌려줄 뿐이다. 예외가 발생한 경우 실제로 발생한 오류가 어떤 것인지 알 수 있는 무언가를 돌려주면 좋을 것이다. 이번 절에서는 Option을 간단하게 확장해서, 실패의 <strong>원인</strong>을 추적할 수 있는 Either 자료 형식을 만들어 본다.</p>
<div class="highlight"><pre><span></span><code><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Either</span><span class="p">[</span><span class="o">+</span><span class="nc">E</span><span class="p">,</span> <span class="o">+</span><span class="nc">A</span><span class="p">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Left</span><span class="p">[</span><span class="o">+</span><span class="nc">E</span><span class="p">](</span><span class="n">value</span><span class="p">:</span> <span class="nc">E</span><span class="p">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span> <span class="nc">Nothing</span><span class="p">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Right</span><span class="p">[</span><span class="o">+</span><span class="nc">A</span><span class="p">](</span><span class="n">value</span><span class="p">:</span> <span class="nc">A</span><span class="p">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">Nothing</span><span class="p">,</span> <span class="nc">A</span><span class="p">]</span>
</code></pre></div>
<p>Option처럼 Either도 case가 두 개 뿐이다. Option과의 본질 적인 차이는, 두 경우 모두 값을 가진다는 것이다. 이 형식은 두 형식의 <strong>분리합집합</strong>이라 할 수 있다. 이 형식을 성공 또는 실패를 나타내는 데 사용할 때에는, Right 생성자를 성공을 나타내는데 사용하고 Left는 실패에 사용한다. 왼쪽 형식 매개변수의 이름으로는 error를 의미하는 E를 사용한다.</p>
<p>mean 예제를 다시 보자. 이번에는 실패의 경우에 String을 돌려준다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">IndexedSeq</span><span class="p">[</span><span class="nc">Double</span><span class="p">]):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">String</span><span class="p">,</span> <span class="nc">Double</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span>
    <span class="nc">Left</span><span class="p">(</span><span class="s">&quot;mean of empty list!&quot;</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="nc">Right</span><span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
</code></pre></div>
<p>오류에 대한 추가 정보, 이를테면 소스 코드에서 오류가 발생한 위치를 알 수 있는 스택 추적 정보가 있으면 편리한 경우가 종종 있다. 그런 경우 Either의 Left 쪽에서 그냥 예외를 돌려주면 된다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">safeDiv</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">Exception</span><span class="p">,</span> <span class="nc">Int</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">try</span> <span class="nc">Right</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="p">)</span>
  <span class="k">catch</span> <span class="p">{</span> <span class="k">case</span> <span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span> <span class="o">=&gt;</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div>
<p>Option에서 했듯이, 던져진 예외를 값으로 변환한다는 이러한 공통의 패턴을 추출한 함수 Try를 작성해 보자.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">Try</span><span class="p">[</span><span class="nc">A</span><span class="p">](</span><span class="n">a</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">A</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">Exception</span><span class="p">,</span> <span class="nc">A</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">try</span> <span class="nc">Right</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
  <span class="k">catch</span> <span class="p">{</span> <span class="k">case</span> <span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span> <span class="o">=&gt;</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Either</span><span class="p">[</span><span class="o">+</span><span class="nc">E</span><span class="p">,</span> <span class="o">+</span><span class="nc">A</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">def</span> <span class="nf">map</span><span class="p">[</span><span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">B</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span> <span class="nc">B</span><span class="p">]</span> <span class="o">=</span>
    <span class="bp">this</span> <span class="k">match</span>
      <span class="k">case</span> <span class="nc">Right</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Right</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
      <span class="k">case</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">flatMap</span><span class="p">[</span><span class="nc">EE</span> <span class="o">&gt;:</span> <span class="nc">E</span><span class="p">,</span> <span class="nc">B</span><span class="p">](</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">B</span><span class="p">]):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">B</span><span class="p">]</span> <span class="o">=</span>
    <span class="bp">this</span> <span class="k">match</span>
      <span class="k">case</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Left</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
      <span class="k">case</span> <span class="nc">Right</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">orElse</span><span class="p">[</span><span class="nc">EE</span> <span class="o">&gt;:</span> <span class="nc">E</span><span class="p">,</span> <span class="nc">AA</span> <span class="o">&gt;:</span> <span class="nc">A</span><span class="p">](</span><span class="n">b</span><span class="p">:</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">AA</span><span class="p">]):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">AA</span><span class="p">]</span> <span class="o">=</span>
    <span class="bp">this</span> <span class="k">match</span>
      <span class="k">case</span> <span class="nc">Left</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">b</span>
      <span class="k">case</span> <span class="nc">Right</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Right</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">map2</span><span class="p">[</span><span class="nc">EE</span> <span class="o">&gt;:</span> <span class="nc">E</span><span class="p">,</span> <span class="nc">B</span><span class="p">,</span> <span class="nc">C</span><span class="p">](</span><span class="n">b</span><span class="p">:</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">B</span><span class="p">])(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">C</span><span class="p">):</span>
    <span class="nc">Either</span><span class="p">[</span><span class="nc">EE</span><span class="p">,</span> <span class="nc">C</span><span class="p">]</span> <span class="o">=</span> <span class="k">for</span> <span class="p">{</span> <span class="n">a</span> <span class="o">&lt;-</span> <span class="bp">this</span><span class="p">;</span> <span class="n">b1</span> <span class="o">&lt;-</span> <span class="n">b</span> <span class="p">}</span> <span class="k">yield</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>이러한 정의들이 있으면 Either를 for-함축에 사용할 수 있다.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parseInsuranceRateQuote</span><span class="p">(</span>
    <span class="n">age</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">numberOfSpeedingTickets</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">Exception</span><span class="p">,</span> <span class="nc">Double</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">for</span> <span class="p">{</span>
    <span class="n">a</span> <span class="o">&lt;-</span> <span class="nc">Try</span> <span class="p">{</span> <span class="n">age</span><span class="p">.</span><span class="n">toInt</span> <span class="p">}</span>
    <span class="n">tickets</span> <span class="o">&lt;-</span> <span class="nc">Try</span> <span class="p">{</span> <span class="n">numberOfSpeedingTickets</span><span class="p">.</span><span class="n">toInt</span> <span class="p">}</span>
  <span class="p">}</span> <span class="k">yield</span> <span class="n">insuranceRateQuote</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nc">Tickets</span><span class="p">)</span>
</code></pre></div>
<p>이제는 실패 시 그냥 None이 아니라 발생한 실제 예외에 대한 정보를 얻게 되었다.</p>
<div class="highlight"><span class="filename">sequence, traverse</span><pre><span></span><code><span class="k">def</span> <span class="nf">traverse</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span><span class="nc">A</span><span class="p">,</span><span class="nc">B</span><span class="p">](</span><span class="n">as</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">A</span><span class="p">])(</span><span class="n">f</span><span class="p">:</span> <span class="nc">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span> <span class="nc">B</span><span class="p">]):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span> <span class="nc">List</span><span class="p">[</span><span class="nc">B</span><span class="p">]]</span> <span class="o">=</span>
  <span class="n">as</span> <span class="k">match</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Right</span><span class="p">(</span><span class="nc">Nil</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">h</span> <span class="o">::</span> <span class="n">t</span> <span class="o">=&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">h</span><span class="p">).</span><span class="n">map2</span><span class="p">(</span><span class="n">traverse</span><span class="p">(</span><span class="n">t</span><span class="p">)(</span><span class="n">f</span><span class="p">))(</span><span class="n">_</span> <span class="o">::</span> <span class="n">_</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sequence</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span><span class="nc">A</span><span class="p">](</span><span class="n">as</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span><span class="nc">A</span><span class="p">]]):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">E</span><span class="p">,</span><span class="nc">List</span><span class="p">[</span><span class="nc">A</span><span class="p">]]</span> <span class="o">=</span>
  <span class="n">traverse</span><span class="p">(</span><span class="n">as</span><span class="p">)(</span><span class="n">x</span> <span class="o">=&gt;</span> <span class="n">x</span><span class="p">)</span>
</code></pre></div>
<p>함수 mkPerson은 주어진 이름과 나이의 유효성을 점검한 후 유효한 Person을 생성한다.</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">Name</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span><span class="nc">Age</span><span class="p">)</span>
<span class="k">sealed</span> <span class="k">class</span> <span class="nc">Name</span><span class="p">(</span><span class="kd">val</span> <span class="n">value</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span>
<span class="k">sealed</span> <span class="k">class</span> <span class="nc">Age</span><span class="p">(</span><span class="kd">val</span> <span class="n">value</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">mkName</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">String</span><span class="p">,</span> <span class="nc">Name</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;&quot;</span> <span class="o">||</span> <span class="n">name</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nc">Left</span><span class="p">(</span><span class="s">&quot;Name is empty.&quot;</span><span class="p">)</span>
  <span class="k">else</span> <span class="nc">Right</span><span class="p">(</span><span class="k">new</span> <span class="nc">Name</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">mkAge</span><span class="p">(</span><span class="n">age</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">String</span><span class="p">,</span> <span class="nc">Age</span><span class="p">]</span> <span class="o">=</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nc">Left</span><span class="p">(</span><span class="s">&quot;Age is out of range.&quot;</span><span class="p">)</span>
  <span class="k">else</span> <span class="nc">Right</span><span class="p">(</span><span class="k">new</span> <span class="nc">Age</span><span class="p">(</span><span class="n">age</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">mkPerson</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Either</span><span class="p">[</span><span class="nc">String</span><span class="p">,</span> <span class="nc">Person</span><span class="p">]</span> <span class="o">=</span>
  <span class="n">mkname</span><span class="p">(</span><span class="n">name</span><span class="p">).</span><span class="n">map2</span><span class="p">(</span><span class="n">mkAge</span><span class="p">(</span><span class="n">age</span><span class="p">))(</span><span class="nc">Person</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">))</span>
</code></pre></div>
<h2 id="45">4.5 요약<a class="headerlink" href="#45" title="Permanent link">&para;</a></h2>
<p>이번 장에서는 예외를 사용할 때의 문제점 몇 가지를 지적하고 순수 함수적 오류 처리의 기본 원리를 소개했다. 예외를 보통의 값으로 표현하고 고차 함수를 이용해서 오류처리 및 전파의 공통 패턴들을 캡슐화한다는 것이다. 이를 더욱 일반화하면 임의의 효과를 값으로 표현한다는 착안이 된다.</p>
<p>이번에 소개한 도구들이 있으면, 예외는 정말로 복구 불가능한 조건에서만 사용하면 된다.</p>
                
                  
                
              
              
  
    <div id="__comments">
      <hr />
      <p><strong>작성자</strong>: 구민규</p>
      <p><strong>작성일</strong>: 2021-11-22</p>
      <hr />
      <script src="https://utteranc.es/client.js"
        repo="week-with-me/TWIL"
        issue-term="title"
        theme="github-dark"
        crossorigin="anonymous"
        async>
      </script>
    </div>
  

            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../2021-11-17-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%9D%91%EC%A7%91%EB%8F%84/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 컴포넌트 응집도" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              컴포넌트 응집도
            </div>
          </div>
        </a>
      
      
        
        <a href="../../%EC%84%B1%EC%8A%B9%EC%9D%B5/2021-10-31-how-to-use-awk/" class="md-footer__link md-footer__link--next" aria-label="Next: awk로 표 형식의 데이터를 쉽게 가공해보자!" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              awk로 표 형식의 데이터를 쉽게 가공해보자!
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["header.autohide", "navigation.tabs", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="../../../js/termynal.js"></script>
      
        <script src="../../../js/custom.js"></script>
      
    
  </body>
</html>